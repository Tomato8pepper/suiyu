<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .image-item{
            display: block;
            height: 300px;
            margin-bottom: 50px;
        }
    </style>
</head>
<body>
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127191&di=3a6b4761a42f13257167af55f582c34f&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2Fe%2F57beb968e9c36.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127208&di=c635a74d68f3a70b225289d3506dfb37&imgtype=0&src=http%3A%2F%2Fimg.ewebweb.com%2Fuploads%2F20190403%2F16%2F1554278474-naSczQoyqu.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127206&di=2bdd0ffe1e1051c01ed90ba6f35fabd8&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2%2F5784bb7b24a77.jpg" />
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604926630&di=7f0206e497fcd9392fd64841b18da1c3&imgtype=0&src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D1040017257%2C2260225617%26fm%3D214%26gp%3D0.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127205&di=ab65d0e23cd6bdbbfc0e923146cbfc5e&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F7%2F53c74897f22cc.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127204&di=cd217f538bd1b9f44c3e630486a5c4d0&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2Fc%2F57b67b4952234.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127208&di=c635a74d68f3a70b225289d3506dfb37&imgtype=0&src=http%3A%2F%2Fimg.ewebweb.com%2Fuploads%2F20190403%2F16%2F1554278474-naSczQoyqu.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127209&di=5b114c96094382b94b26938fb37f7946&imgtype=0&src=http%3A%2F%2Fimg.duoziwang.com%2F2016%2F12%2F16%2F01123710286.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596605340954&di=6b163415b62b076baf8d737473a0f40b&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F6%2F57e8d142028d3.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127194&di=d858093f402ea73790fcd4c321d681fe&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F0%2F59c1dab039d7f.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3248950662,2546509420&fm=26&gp=0.jpg" alt="">
    <img class="image-item" src="" lazy-load="true" data-original="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596604127199&di=d3867977ea292546c1b411b7cd1edfc3&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2017-11-29%2F5a1e130e127ef.jpg" alt="">  
</body>
<script>
    // let viewHeight = window.innerHeight
    let viewHeight = document.documentElement.clientHeight
    console.log(viewHeight)

    function lazyLoad() {
        let eles = document.querySelectorAll('img[data-original][lazy-load]')
        // console.log(eles)
        // 判断每一个img是否出现在可视区域
        // eles.forEach((item,index) =>{
        //     console.log(item)
        // })
        Array.prototype.forEach.call(eles, function(item, index){
            console.log(item)
            let rect
            rect = item.getBoundingClientRect() //用于获取页面元素上某个元素的左右上下分别相对于浏览器视窗的位置
            // console.log(rect)
            //元素bottom,top距离顶部    元素left,right距离屏幕左边
            if(rect.bottom >= 0 && rect.top < viewHeight){
                !function() {
                    let img = new Image()
                    img.src = item.dataset.original
                    img.onload = function() {
                        item.src = img.src
                    }
                    item.removeAttribute('data-original')
                    item.removeAttribute('lazyload')
                }()
            }
         })
        // Array.from(eles)   //强制把eles转换成数组

    }
    lazyLoad()
    document.addEventListener('scroll', lazyLoad)
</script>
</html>