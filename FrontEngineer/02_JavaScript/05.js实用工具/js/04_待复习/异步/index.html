<!DOCTYPE html>
<html lang="en">
<!-- 代码题： red() -> 1s -> yellow -> 2s -> green() 4s -> 循环五次; -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            background-color: grey;
            display: inline-block;
            margin: 30px;
            width: 100px;
            height: 100px;
            border-radius: 50px;
        }
        .green.light {
            background-color: green;
        }
        .yellow.light {
            background-color: yellow;
        }
        .red.light {
            background-color: red;
        }
    </style>
</head>

<body>
    <div class="red"></div>
    <div class="yellow"></div>
    <div class="green"></div>
    <button id="next" onclick="doGo();">开始</button>
    <script>
        function green() {
            var lights = document.getElementsByTagName("div");
            for (var i = 0; i < 3; i++)
                lights[i].classList.remove("light")
            document.getElementsByClassName("green")[0].classList.add('light')
        }
        function red() {
            var lights = document.getElementsByTagName("div");
            for (var i = 0; i < 3; i++)
                lights[i].classList.remove("light")
            document.getElementsByClassName("red")[0].classList.add('light')
        }
        function yellow() {
            var lights = document.getElementsByTagName("div");
            for (var i = 0; i < 3; i++)
                lights[i].classList.remove("light")
            document.getElementsByClassName("yellow")[0].classList.add('light')
        }
        // let i = 0;
        // go();
        function go() {
            // if(i >= 5) return
            // i++
            return new Promise((resolve, reject) => {
                red();
                setTimeout(() => {
                    yellow();
                    setTimeout(() => {
                        green();
                        setTimeout(() => {
                            console.log('第n次循环！！');
                            resolve();
                            // go();
                        }, 4000);
                    }, 2000);
                }, 1000);
            })
        }
        //async await
        // setInterval
        // for (i = 0; i < 5; i++) {
        //     go();
        // }
        async function doGo() {
            for (let i = 0; i < 5; i++) {
                await go();                      //await 后要接一个promise函数
            }
        }
        // sleep(1000)
        // console.log(1);
        function sleep(time) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                  resolve()  
                }, time);
            })
        }
        // axios().then()
        // sleep(2000).then()

        //GET POST的区别
        //juejin.im?query=js
        //http并没有规定 GET参数一定放到url后面，用post一定要放到请求体里面
        // 语义区别
        // 安全性: GET < POST < https

        //axios XMLhttprequest
        let xhr = new XMLHttpRequest()
        xhr.open('post', 'http://neteasecloudmusicapi.zhaoboy.com/artist/songs', true) //true 异步
        xhr.onload = function(res) {
            console.log(res);
        }
        // 请求体
        let obj = {
            id: 6452,
            limit: 20
        }
        xhr.setRequestHeader('content-type', 'text/plain')

        // content-type
        //200
        
        xhr.send(JSON.stringify(obj));

    </script>
</body>

</html>